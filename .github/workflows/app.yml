name: Build and Test

# Aqui contÃ©m o trigger da nossa pipeline:
# ==============================================================================================
# Nesse ponto:
# ğŸ”„ Sempre que houver um push na branch "master" ou quando um pull request for aberto/atualizado
on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master
  # usada para conseguir executar a pipeline manualmente...
  workflow_dispatch:

# Aqui contÃ©m os jobs (steps) da pipeline, ou seja, os passos de Build em ordem numÃ©rica:
# ==============================================================================================
# 1. âš™ï¸ Usa o Ubuntu como ambiente de execuÃ§Ã£o
# 2. ğŸ“¥ Fazer checkout do cÃ³digo
# 3. â˜• Configurar o Instalar o Node.js v.20
# 4. ğŸ“¦ Instalar as dependÃªncias do package.json
# 5. ğŸš€ Executar o build
# 6. ğŸš€ Executar os teste se houver
jobs:
  build-and-test:
    # 1. definir o Sistema Operacional que serÃ¡ utilizado
    runs-on: ubuntu-latest

    steps:
      
      # 2. Faz o git clone do repositÃ³rio...
      - name: Checkout repository
        uses: actions/checkout@v4
      
      # 3. Instalar o Node.js
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      # 4. Instalar as dependÃªncias do package.json
      - name: Install dependencies
        run: npm ci

      # 5. Build o projeto front-end
      - name: Build project
        run: npm run build
      
      # 6. Testa o projeto front-end
      #- name: Run tests
      #  run: npm test